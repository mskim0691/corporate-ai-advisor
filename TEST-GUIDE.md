# CorporateAI Advisor 테스트 가이드

## 준비 사항

### 1. Gemini API 키 설정 (필수!)
분석 기능을 테스트하려면 Google Gemini API 키가 필요합니다.

1. https://aistudio.google.com/app/apikey 접속
2. API 키 생성 (무료)
3. `.env` 파일 수정:
   ```env
   GOOGLE_GEMINI_API_KEY="여기에-발급받은-API-키-입력"
   ```
4. 서버 재시작 (Ctrl+C 후 `npm run dev`)

**API 키가 없으면 분석 단계에서 에러가 발생합니다!**

### 2. 테스트용 파일 준비 완료
다음 파일들이 준비되어 있습니다:
- `test-documents/sample-company-info.txt` - 기업 개요
- `test-documents/sample-financial.txt` - 재무제표

---

## 테스트 시나리오

### 시나리오 1: 기본 플로우 테스트 (5분)

#### Step 1: 홈페이지 확인
1. 브라우저에서 http://localhost:3000 접속
2. 랜딩 페이지가 표시되는지 확인
3. "무료 시작하기" 버튼 클릭

#### Step 2: 회원가입
1. 회원가입 페이지로 이동 확인
2. 정보 입력:
   ```
   이름: 테스트유저
   이메일: test@example.com
   비밀번호: test1234
   비밀번호 확인: test1234
   ```
3. "회원가입" 버튼 클릭
4. 로그인 페이지로 리다이렉트 확인

#### Step 3: 로그인
1. 로그인 페이지에서 정보 입력:
   ```
   이메일: test@example.com
   비밀번호: test1234
   ```
2. "로그인" 버튼 클릭
3. 대시보드로 이동 확인

#### Step 4: 대시보드 확인
1. 구독 플랜: "Free" 표시 확인
2. 이번 달 사용량: "0 / 2" 표시 확인
3. 총 프로젝트: "0" 표시 확인
4. "새 분석 시작" 버튼 활성화 확인

#### Step 5: 프로젝트 생성 - 기업 정보 입력
1. "새 분석 시작" 버튼 클릭
2. Step 1에서 기업 정보 입력:
   ```
   회사명: ABC 주식회사
   사업자등록번호: 1234567890 (숫자만)
   대표자 이름: 홍길동
   업종: IT 소프트웨어 개발
   ```
3. "다음" 버튼 클릭
4. Step 2로 이동 확인

#### Step 6: 파일 업로드
1. "파일 선택" 버튼 클릭 또는 드래그앤드롭
2. 다음 파일 선택:
   - `test-documents/sample-company-info.txt`
   - `test-documents/sample-financial.txt`
3. 업로드된 파일 목록 확인 (2개)
4. "분석 시작" 버튼 클릭

#### Step 7: 분석 진행
1. "분석 진행 중" 페이지 표시 확인
2. 로딩 애니메이션 확인
3. "약 2-3분 소요됩니다" 메시지 확인
4. 3초마다 상태 체크 (자동)
5. 완료 시 리포트 페이지로 자동 이동

**⚠️ 주의**: Gemini API 키가 설정되지 않으면 여기서 실패합니다!

#### Step 8: 리포트 확인
1. 리포트 뷰어 페이지 표시 확인
2. 슬라이드 1/7 표시 확인
3. 슬라이드 제목과 내용 확인
4. "다음" 버튼 클릭하여 슬라이드 이동
5. 하단 썸네일로 슬라이드 직접 이동

#### Step 9: PDF 다운로드
1. "PDF 다운로드" 버튼 클릭
2. 텍스트 파일 다운로드 확인
3. 파일명: `ABC 주식회사_분석리포트.txt`
4. 파일 내용 확인

#### Step 10: 대시보드 복귀
1. "대시보드로" 버튼 클릭
2. 이번 달 사용량: "1 / 2" 업데이트 확인
3. 총 프로젝트: "1" 업데이트 확인
4. 프로젝트 목록에 새 프로젝트 표시 확인
5. 상태: "완료" 확인

---

### 시나리오 2: 사용량 제한 테스트 (10분)

#### Test 1: Free 플랜 사용량 확인
1. 위 시나리오 1을 총 2번 반복
2. 대시보드에서 사용량 "2 / 2" 확인

#### Test 2: 사용량 초과 시도
1. "새 분석 시작" 버튼이 "사용량 초과"로 비활성화되는지 확인
2. 프로젝트 생성 시도 시 403 에러 확인

---

### 시나리오 3: 에러 케이스 테스트

#### Test 1: 잘못된 로그인 정보
1. 존재하지 않는 이메일로 로그인 시도
2. "이메일 또는 비밀번호가 올바르지 않습니다" 에러 확인

#### Test 2: 중복 회원가입
1. 이미 가입한 이메일로 재가입 시도
2. "이미 사용 중인 이메일입니다" 에러 확인

#### Test 3: 파일 없이 분석 시작
1. 프로젝트 생성 시 파일 업로드 건너뛰기 시도
2. "최소 1개의 파일을 업로드해주세요" 에러 확인

#### Test 4: Gemini API 키 미설정
1. `.env`에서 API 키 제거
2. 분석 시작
3. "AI 분석 중 오류가 발생했습니다" 에러 확인
4. 프로젝트 상태: "실패" 확인

---

## 예상 결과

### 성공적인 분석 결과 예시
리포트는 다음 7개 슬라이드로 구성됩니다:

1. **표지**
   - 기업명: ABC 주식회사
   - 분석 일자 등

2. **기업 개요**
   - 기본 정보
   - 사업 내용 요약

3. **재무 현황 분석**
   - 매출액: 5억 원
   - 수익성, 안정성, 성장성 분석

4. **SWOT 분석**
   - 강점, 약점, 기회, 위협

5. **주요 리스크 요인**
   - 대기업 의존도
   - 자금 여력 부족 등

6. **개선 제안사항**
   - 구체적 개선 방안

7. **결론 및 종합 의견**
   - 전체 요약

---

## 문제 해결

### 서버가 시작되지 않을 때
```bash
# 포트 3000이 사용 중인지 확인
lsof -i :3000

# 프로세스 종료 후 재시작
npm run dev
```

### 데이터베이스 에러
```bash
# 마이그레이션 재실행
npx prisma migrate reset
npx prisma migrate dev --name init
```

### Gemini API 에러
1. API 키가 올바른지 확인
2. API 할당량 초과 여부 확인
3. `.env` 파일 저장 후 서버 재시작

### 파일 업로드 에러
1. `uploads/` 디렉토리 권한 확인
2. 파일 크기 확인 (10MB 제한)

---

## 성능 메트릭

- 회원가입: < 1초
- 로그인: < 1초
- 파일 업로드: < 2초
- AI 분석: 1-3분 (Gemini API 속도에 따름)
- 리포트 렌더링: < 1초
- PDF 다운로드: < 1초

---

## 다음 단계

테스트가 성공했다면:
1. 실제 기업 문서로 테스트
2. PDF 파싱 라이브러리 추가
3. Stripe 결제 연동
4. 프로덕션 배포 준비

테스트 중 문제 발생 시:
1. 브라우저 콘솔 에러 확인
2. 서버 터미널 에러 로그 확인
3. 데이터베이스 상태 확인 (`npx prisma studio`)
